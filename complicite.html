<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Complicit√© - ICAM Games</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <div style="padding: 10px 0;"><a href="index.html" style="text-decoration:none; font-size: 1.5rem;">üè†</a></div>
        
        <div id="comp-setup">
            <h1 style="color:var(--neon-blue); text-align:center;">Complicit√©</h1>
            <div class="config-box" style="background:rgba(20,20,20,0.8); padding:20px; border-radius:20px;">
                <label>Objectif de points (0 = Infini)</label>
                <div class="config-row">
                    <input type="number" id="win-score-input" placeholder="Ex: 10" value="10">
                </div>
                
                <label style="margin-top:15px; display:block;">√âquipes</label>
                <div id="teams-container"></div>
                <button class="btn btn-neutral" onclick="addTeam()" style="width:100%; margin-top:10px; border:1px dashed #555;">+ Ajouter √âquipe</button>
            </div>
            <button class="btn btn-primary" onclick="startCompliciteGame()" style="width:100%; margin-top:20px;">LANCER LA PARTIE</button>
        </div>

        <div id="comp-game" class="hidden">
            <div id="scoreboard"></div>
            <div id="turn-indicator" style="text-align:center; margin-bottom:15px; font-weight:bold; color:var(--neon-blue);"></div>

            <div id="word-to-guess" class="word-display">MOT</div>

            <div id="hold-zone" class="hold-zone">
                <div id="hold-instruction">üëÜ MAINTIENS POUR VOIR</div>
            </div>

            <div class="game-controls">
                <button class="btn btn-found" onclick="roundEnd('win')">‚úÖ Trouv√© !</button>
                <button class="btn btn-intercept" onclick="handleStealAttempt()">üòà Intercept√© !</button>
                <button class="btn btn-neutral" onclick="roundEnd('skip')">‚ò†Ô∏è Rat√© / Tabou</button>
            </div>
        </div>
    </div>

    <div id="modal-victory" class="modal-overlay hidden">
        <div class="modal-content">
            <h1 style="font-size:4rem; margin:0;">üèÜ</h1>
            <h2 id="winner-name" style="color:var(--neon-green); font-size:2rem;">VICTOIRE</h2>
            <p style="color:#aaa;">La partie est termin√©e !</p>
            <button class="btn btn-primary" onclick="location.reload()" style="width:100%; margin-top:20px;">REJOUER</button>
        </div>
    </div>

    <script>
        // LISTE DE MOTS MASSIVE (Plus de 100 mots)
        const baseWords = [
            "Brosse √† dents", "Micro-ondes", "Chaussette", "T√©l√©commande", "Canap√©", "Oreiller", "PQ", "Chargeur", "Camping", "Plage", "Prison", "H√¥pital", "Ascenseur", "Pizza", "Raclette", "Sushi", "Ketchup", "Divorce", "Mariage", "Enterrement", "Harry Potter", "Batman", "Zidane", "Macron", "Pigeon", "Moustique", "Licorne", "Dinosaure", "Vomir", "Danser", "Pleurer", "Crier", "Iphone", "Lave-vaisselle", "Tondeuse", "S√®che-cheveux", "Grille-pain", "Machine √† laver", "Frigo", "Coussin", "Tapis", "Rideau", "Cl√©", "Parapluie", "Sac √† dos", "Valise", "Dentifrice", "Savon", "Shampoing", "Miroir", "Peigne", "Lunettes", "Montre", "Bague", "Collier", "Bracelet", "Boucle d'oreille", "Chaussure", "Botte", "Sandale", "Basket", "Talon haut", "Cravate", "Ceinture", "Chapeau", "Casquette", "Bonnet", "√âcharpe", "Gants", "Maillot de bain", "Pyjama", "Robe", "Jupe", "Pantalon", "Short", "Chemise", "Pull", "Veste", "Manteau", "Costume", "Cale√ßon", "Culotte", "Soutien-gorge", "Collant", "Chaussette", "Mouchoir", "Serviette", "Gant de toilette", "√âponge", "Balai", "Aspirateur", "Fer √† repasser", "Po√™le", "Casserole", "Passoire", "Balance", "Mixeur", "Robot de cuisine", "Four", "Plaque de cuisson", "Hotte", "Cafeti√®re", "Bouilloire", "Th√©i√®re", "Verre", "Assiette", "Couverts", "Fourchette", "Couteau", "Cuill√®re", "Bouteille", "Canette", "Tire-bouchon", "Ouvre-bo√Æte", "Planche √† d√©couper", "Ciseau", "Scotch", "Colle", "Stylo", "Crayon", "Gomme", "R√®gle", "Calculatrice", "Ordinateur", "Tablette", "Souris", "Clavier", "√âcran", "Imprimante", "Casque", "√âcouteurs", "Enceinte", "T√©l√©phone", "Appareil photo", "Cam√©ra", "Console de jeux", "Manette", "Livre", "Magazine", "Journal", "Cahier", "Classeur", "Enveloppe", "Timbre", "Carte postale", "Agenda", "Calendrier", "Dictionnaire", "Roman", "BD", "Manga", "Cin√©ma", "Th√©√¢tre", "Mus√©e", "Concert", "Op√©ra", "Cirque", "Zoo", "Parc d'attraction", "Piscine", "Stade", "Gymnase", "Biblioth√®que", "Mairie", "Banque", "Poste", "Gare", "A√©roport", "H√¥tel", "Restaurant", "Bar", "Caf√©", "Boulangerie", "Boucherie", "Supermarch√©", "Pharmacie", "Garage", "Station-service", "Parking", "Pont", "Tunnel", "Autoroute", "Route", "Rue", "Place", "Jardin", "For√™t", "Montagne", "Mer", "Oc√©an", "Lac", "Rivi√®re", "Cascade", "D√©sert", "√éle", "Volcan", "Grotte", "Campagne", "Ferme", "Ch√¢teau", "√âglise", "Mosqu√©e", "Temple", "Synagogue", "Cimeti√®re", "Usine", "Mine", "Phare", "Moulin", "Barrage", "Port", "Bateau", "Avion", "Train", "Bus", "Tramway", "M√©tro", "V√©lo", "Moto", "Voiture", "Camion", "Tracteur", "Fus√©e", "Soucoupe volante", "H√©licopt√®re", "Montgolfi√®re", "Parachute", "Skateboard", "Rollers", "Trottinette", "Ski", "Surf", "Planche √† voile", "Plong√©e", "P√™che", "Chasse", "Randonn√©e", "Escalade", "Camping", "Pique-nique", "Barbecue", "Feu de camp", "√âtoile", "Lune", "Soleil", "Nuage", "Pluie", "Neige", "Orage", "√âclair", "Tonnerre", "Vent", "Temp√™te", "Ouragan", "Tornade", "Inondation", "S√©isme", "Canicule", "Arc-en-ciel", "Brouillard", "Givre", "Gr√™le", "Ros√©e", "Aurore bor√©ale", "√âclipse", "Com√®te", "Ast√©ro√Øde", "Plan√®te", "Galaxie", "Univers", "Espace", "Astronaute", "Extraterrestre", "Robot", "Intelligence artificielle", "Internet", "R√©seaux sociaux", "Jeu vid√©o", "Streaming", "Podcast", "Selfie", "Emoji", "Hashtag", "Bug", "Virus informatique", "Hacker", "Code", "Algorithme", "Donn√©es", "Cloud", "Batterie", "Wi-Fi", "Bluetooth", "USB", "HDMI", "√âcran tactile", "R√©alit√© virtuelle", "R√©alit√© augment√©e", "Drone", "Imprimante 3D", "Voiture √©lectrique", "Panneau solaire", "√âolienne", "Recyclage", "√âcologie", "R√©chauffement climatique", "Biodiversit√©", "Pollution", "D√©forestation", "√ânergie nucl√©aire", "Espace"
        ];
        
        let words = [...baseWords];
        let teams = [{ name: "√âquipe A", score: 0 }, { name: "√âquipe B", score: 0 }];
        let winningScore = 0;
        let currentTeamIndex = 0;

        function renderSetup() {
            const container = document.getElementById('teams-container');
            container.innerHTML = "";
            teams.forEach((team, index) => {
                const row = document.createElement('div');
                row.className = 'config-row';
                row.innerHTML = `<input type="text" value="${team.name}" onchange="teams[${index}].name = this.value">`;
                container.appendChild(row);
            });
        }

        function addTeam() { 
            teams.push({ name: `√âquipe ${teams.length + 1}`, score: 0 }); 
            renderSetup(); 
        }

        function startCompliciteGame() {
            winningScore = parseInt(document.getElementById('win-score-input').value) || 0;
            document.getElementById('comp-setup').classList.add('hidden');
            document.getElementById('comp-game').classList.remove('hidden');
            nextRound();
        }

        function nextRound() {
            if (words.length === 0) words = [...baseWords];
            const idx = Math.floor(Math.random() * words.length);
            document.getElementById('word-to-guess').innerText = words[idx];
            words.splice(idx, 1);
            updateUI();
        }

        function updateUI() {
            const sb = document.getElementById('scoreboard');
            sb.innerHTML = "";
            teams.forEach((t, idx) => {
                const div = document.createElement('div');
                div.className = `team-score-box ${idx === currentTeamIndex ? 'team-active' : ''}`;
                div.innerHTML = `<span class="ts-val">${t.score}</span><span class="ts-name">${t.name}</span>`;
                sb.appendChild(div);
            });
            document.getElementById('turn-indicator').innerText = `Tour de : ${teams[currentTeamIndex].name}`;
        }

        function handleStealAttempt() {
            // Si 2 √©quipes, le point va √† l'autre automatiquement
            if (teams.length === 2) {
                roundEnd('steal', currentTeamIndex === 0 ? 1 : 0);
            } else {
                const container = document.getElementById('steal-buttons-container');
                container.innerHTML = "";
                teams.forEach((t, idx) => {
                    if (idx !== currentTeamIndex) {
                        const btn = document.createElement('button');
                        btn.className = "btn btn-primary";
                        btn.innerText = t.name;
                        btn.onclick = () => { 
                            document.getElementById('modal-steal').classList.add('hidden');
                            roundEnd('steal', idx); 
                        };
                        container.appendChild(btn);
                    }
                });
                document.getElementById('modal-steal').classList.remove('hidden');
            }
        }

        function roundEnd(type, beneficiaryIndex = null) {
            if (type === 'win') {
                teams[currentTeamIndex].score++;
            } else if (type === 'steal') {
                teams[beneficiaryIndex].score++;
            }
            
            // V√©rification Victoire
            if (winningScore > 0 && (teams[currentTeamIndex].score >= winningScore || (beneficiaryIndex !== null && teams[beneficiaryIndex].score >= winningScore))) {
                const winner = teams.find(t => t.score >= winningScore);
                document.getElementById('winner-name').innerText = winner.name + " GAGNE !";
                document.getElementById('modal-victory').classList.remove('hidden');
                return;
            }

            currentTeamIndex = (currentTeamIndex + 1) % teams.length;
            nextRound();
        }

        // --- LOGIQUE DE MAINTIEN ---
        const holdZone = document.getElementById('hold-zone');
        const wordDisplay = document.getElementById('word-to-guess');
        const holdInst = document.getElementById('hold-instruction');

        const show = (e) => {
            if(e.cancelable) e.preventDefault();
            wordDisplay.classList.add('visible');
            holdZone.classList.add('active');
            holdInst.style.opacity = "0";
        }
        const hide = () => {
            wordDisplay.classList.remove('visible');
            holdZone.classList.remove('active');
            holdInst.style.opacity = "1";
        }

        holdZone.addEventListener('mousedown', show);
        holdZone.addEventListener('mouseup', hide);
        holdZone.addEventListener('mouseleave', hide);
        holdZone.addEventListener('touchstart', show, {passive:false});
        holdZone.addEventListener('touchend', hide);

        renderSetup();
    </script>
</body>
</html>
