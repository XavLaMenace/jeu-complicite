<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Complicit√©</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <div id="comp-setup">
            <h1 style="text-align:center; color:var(--neon-blue)">Complicit√©</h1>
            <div id="teams-container"></div>
            <button class="btn btn-neutral" onclick="addTeam()" style="width:100%; margin-top:10px;">+ Ajouter une √©quipe</button>
            <button class="btn btn-primary" onclick="startGame()" style="width:100%; margin-top:20px;">LANCER LE JEU</button>
        </div>

        <div id="comp-game" class="hidden">
            <div id="scoreboard"></div>
            <div id="word-to-guess" class="word-display">MOT</div>
            <div id="hold-zone" class="hold-zone">MAINTIENS POUR VOIR LE MOT</div>
            
            <div class="game-controls">
                <button class="btn btn-found" onclick="scorePoint('win')">‚úÖ Trouv√© !</button>
                <button class="btn btn-intercept" onclick="scorePoint('steal')">üòà Intercept√© !</button>
                <button class="btn btn-neutral" onclick="scorePoint('skip')">Passer / Rat√©</button>
            </div>
        </div>
    </div>

    <script>
        const wordsList = ["Pizza", "Chaussette", "Batman", "Zidane", "Moustique", "Licorne", "Prison", "Sushi", "Camping"];
        let teams = [{name: "√âquipe 1", score: 0}, {name: "√âquipe 2", score: 0}];
        let currentIdx = 0;

        // 1. Ajouter/Afficher les √©quipes
        function renderTeams() {
            const container = document.getElementById('teams-container');
            container.innerHTML = "";
            teams.forEach((t, i) => {
                container.innerHTML += `<div class="config-row"><input type="text" value="${t.name}" onchange="teams[${i}].name=this.value"></div>`;
            });
        }

        function addTeam() {
            teams.push({name: `√âquipe ${teams.length + 1}`, score: 0});
            renderTeams();
        }

        // 2. Lancer le jeu
        function startGame() {
            document.getElementById('comp-setup').classList.add('hidden');
            document.getElementById('comp-game').classList.remove('hidden');
            nextTurn();
        }

        function nextTurn() {
            const word = wordsList[Math.floor(Math.random() * wordsList.length)];
            document.getElementById('word-to-guess').innerText = word;
            updateUI();
        }

        function updateUI() {
            const sb = document.getElementById('scoreboard');
            sb.innerHTML = "";
            teams.forEach((t, i) => {
                sb.innerHTML += `
                    <div class="team-score-box ${i === currentIdx ? 'team-active' : ''}">
                        <span class="ts-val">${t.score}</span>
                        <span class="ts-name">${t.name}</span>
                    </div>`;
            });
        }

        // 3. Marquer des points
        function scorePoint(type) {
            if (type === 'win') teams[currentIdx].score++;
            if (type === 'steal') {
                let next = (currentIdx + 1) % teams.length;
                teams[next].score++;
            }
            currentIdx = (currentIdx + 1) % teams.length;
            nextTurn();
        }

        // 4. LE MAINTIEN (FIX√â)
        const holdZone = document.getElementById('hold-zone');
        const wordBox = document.getElementById('word-to-guess');

        const show = (e) => { e.preventDefault(); wordBox.classList.add('visible'); holdZone.classList.add('active'); };
        const hide = () => { wordBox.classList.remove('visible'); holdZone.classList.remove('active'); };

        holdZone.addEventListener('mousedown', show);
        holdZone.addEventListener('mouseup', hide);
        holdZone.addEventListener('touchstart', show);
        holdZone.addEventListener('touchend', hide);

        renderTeams();
    </script>
</body>
</html>
